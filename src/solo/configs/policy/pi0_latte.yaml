# Ï€0 Fine-tuning Configuration for Heart Latte Art
# For use with OpenPi / LeRobot

# Model configuration
model:
  name: pi0
  pretrained: lerobot/pi0_base

# Dataset
dataset:
  repo_id: ${HF_USERNAME}/latte-heart-demos  # Replace with your HF username
  episodes: null  # Use all episodes

# Training hyperparameters (optimized for H100)
training:
  batch_size: 32  # H100 can handle this
  learning_rate: 1.0e-4
  weight_decay: 1.0e-4
  num_steps: 15000  # ~1.5 hours on H100

  # Checkpointing
  save_freq: 2500
  eval_freq: 1000
  log_freq: 100

  # Optimizer
  optimizer: adamw
  warmup_steps: 500

  # Gradient settings
  grad_clip_norm: 1.0
  mixed_precision: true  # bf16 on H100

# Policy specific
policy:
  # Action chunking
  chunk_size: 50  # 50 actions at 50Hz = 1 second lookahead

  # Flow matching
  num_flow_steps: 10

  # Input/Output
  n_obs_steps: 2  # 2 observation frames
  n_action_steps: 50  # Predict 50 actions

# Observation configuration
observation:
  images:
    wrist:
      shape: [3, 480, 640]
      type: rgb
    overhead:
      shape: [3, 480, 640]
      type: rgb
  state:
    shape: [6]  # 6 joint positions

# Action configuration
action:
  shape: [6]  # 6 joint targets

# Normalization (computed from dataset)
normalization:
  mode: min_max

# Logging
wandb:
  project: latte-art-robot
  entity: null  # Your W&B username
  name: pi0-heart-latte-v1
